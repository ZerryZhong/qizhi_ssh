<!DOCTYPE HTML>
<html>
<head>
<title>堡垒机</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Modern Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
 <!-- Bootstrap Core CSS -->
<link href="/static/bootstrap/css/bootstrap.min.css" rel='stylesheet' type='text/css' />
<!-- Custom CSS -->
<link href="/static/bootstrap/css/font-awesome.css" rel="stylesheet"> 
<!-- jQuery -->
<!--<script src="/static/bootstrap/js/jquery.min.js"></script>-->
<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<!----webfonts--->
<!---//webfonts--->  
<!-- Bootstrap Core JavaScript -->



<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">

  var _baseurl='',
            pagesize_config='30',
      _select_mod = "client",
      _session_mod = _select_mod,
      _validate_switch = '1',
      _form_validate = '',
      toolbar_set = true,
      menu_interaction = 'click' ? 'click' : 'click',
      tab_interaction = 'click' ? 'click' : 'click',
      _temp_time = '2016-08-11 22:38:53',
      _wizzard_div = 'close';
      _server_time = new Date();
      _client_time = new Date();
      _server_time.setFullYear(_temp_time.split("-")[0]);
      _server_time.setMonth(_temp_time.split("-")[1]-1);
      _server_time.setDate((_temp_time.split(" ")[0]).split('-')[2]);
      _server_time.setHours((_temp_time.split(" ")[1]).split(':')[0]);
      _server_time.setMinutes((_temp_time.split(" ")[1]).split(':')[1]);
      _server_time.setSeconds((_temp_time.split(" ")[1]).split(':')[2]);
      now_user_id = '21';
    var locale = "zh_CN.UTF-8".split(".")[0];
      toolbar_set = false;
    var wdate_lang = "zh-cn";
  switch(locale){
    case "en_US":
      wdate_lang = "en";
      break;
    case "zh_CN":
      wdate_lang = "zh-cn";
      break;
    default:
      wdate_lang = "auto";
  }
  </script>
<script type="text/javascript" src="/static/js/shterm.i18n.js"></script>
<script type="text/javascript" src="/static/js/jquery-ui-1.8.10.custom.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.bgiframe-2.1.1.js"></script>
<script type="text/javascript" src="/static/js/jquery.extend.js"></script>
<script type="text/javascript" src="/static/js/init.js"></script>
<script type="text/javascript" src="/static/js/jquery.pager.js"></script>
<script type="text/javascript" src="/static/js/selectassociate.js"></script>
<script type="text/javascript" src="/static/js/mustache.js"></script>
<script type="text/javascript" src="/static/js/underscore-min.js"></script>
<script type="text/javascript" src="/static/js/PluginDetectJava.js"></script>

<script type="text/javascript">
  $(function(){
          _page_init();
    _showMenu();
    wizzard_toggle();
          $(window).bind('resize',function(){
                  _initView();
                  main_width = $('#main').width();
          });
    _nomenu();
        setTimeout(_checksession,_timeout);
    setTimeout(_checknotice,_timeout);
    _easyForTest();
    var pcount = $("select[name=page] option").size();
    var pindex = $("select[name=page]").val();
    if(pcount>0){
      //alert(pcount);alert(pindex);
      $("select[name=page]").pager({pageindex:pindex,pagecount:pcount,paged:pagerchange});
    }
    else if($("select[name=page]").attr("name")){
                        $("select[name=page]").pager({pageindex:0,pagecount:0,paged:pagerchange});
    }
    disable_options();
      })
  function pagerchange(page){
    $("select[name=page]").val(page);
    $("select[name=page]").change();
  }

    $.os = {
        name: (/(win|mac|linux|sunos|solaris|iphone)/.exec(navigator.platform.toLowerCase()) || ['unknown'])[0].replace('sunos','solaris')
    }

    var cutil = {
        getCookie: function(name){
            if(document.cookie.length > 0){
                var start = document.cookie.indexOf(name + '=');
                if(start != -1){
                    start = start + name.length + 1;
                    var end = document.cookie.indexOf(";", start);
                    if(end == -1) end = document.cookie.length;
                    return unescape(document.cookie.substring(start, end));
                }
            }
            return "";
        },
        setCookie : function(name, value, expiredays){
            var exdate = new Date();
      exdate.setDate(exdate.getDate() + expiredays);
      document.cookie = name+'='+escape(value)+((expiredays==null) ? "" : ";path=/;expires="+exdate.toGMTString());
        }
    }

  </script>

<script type="text/javascript">
var tui_default = '',
    tui_color = '',
    client_version = '2.0.11',
    gui_default = 'fullscreen',
    gui_client= 'mstsc',
    sess_remark_mode = 'disable',
    tui_client = 'xshell',
    worksheet = '0',
    diskmap_selector = 'java',
    rdp_diskmap = '',
    rdp_diskmap_sel = '',
    rdp_diskmap_left = '',
    gui_active_rdp = 'none',
    shterm_loader = '0' == 1 ? 1 : 0,
    pagesize = Number('30'),
    filter_type = '',
    left_way = 'click',
  dual_oper = '',
    rdp_console_default_by_person = 0,
    xdmcp_login_agent = 0,
    more_text = '更多',
    need_activex_info = '需要安装ShtermLoader.msi 并打开浏览器对该activex控件的支持';
if(pagesize==0) pagesize = 20;
if(tui_client == "scrt") tui_client = "securecrt";
if(rdp_diskmap_sel){
  var temp_diskmap = rdp_diskmap_sel.split(' ');
  rdp_diskmap_left = temp_diskmap;
  rdp_diskmap_sel = {};
  for(var dd =0;dd<temp_diskmap.length;dd++){
    rdp_diskmap_sel[temp_diskmap[dd]] = 1;
  }
}

</script>


<div style="height:0;" id="shterm-applet"></div>


<style type="text/css">
#service_start p{display:none;font-size:14px;margin-top:5px;}
.ul_service li {text-align:center;cursor:pointer;list-style: none;  }
.ul_service {display: inline-table;}
#side-menu li:hover {background: #eee;}
tr:hover {background: #eee;}



.navbar-header a {
    margin-top: 17px;
    font-size: 18px;
}

header nav {
    margin-top: 13px;
}

table tr td {
    word-wrap:break-word;
    word-break:break-all;
}

form.search {
    margin-bottom: 20px;
}

form div.form-group {
    width: 250px;
}

body, button, input, select, textarea {
    font: 14px/1.42858 "Lucida Grande",Verdana,Arial,"Microsoft YaHei",Arial,Helvetica,Geneva,sans-serif;
    font-style: normal;
    font-variant-ligatures: normal;
    font-variant-caps: normal;
    font-variant-numeric: normal;
    font-weight: normal;
    font-stretch: normal;
    font-size: 14px;
    line-height: 1.42858;
    font-family: "Lucida Grande", Verdana, Arial, "Microsoft YaHei", Arial, Helvetica, Geneva, sans-serif;
}

ul li a {

    color: rgb(0, 0, 0);
    cursor: pointer;
    font-weight: bold;
}

#myModal {
  display: none;
}

#commentModal {
  display: none;
}

</style>
</head>
<body>
<div id="wrapper">
     <!-- Navigation -->
        <header class="navbar navbar-inverse" role="banner">
          <div class="container-fluid">
            <div class="navbar-header">
              <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
              </button>
                <div class="logo"></div>
              <a href="/#" class="navbar-brand">堡垒机</a>
            </div>

            <nav class="pull-right" role="navicon">
              <ul class="nav navbar-nav">
                  <li>
                        <a href="#">
                            <span class="glyphicon glyphicon-user"></span>
                            <span style="padding-left:5px"><?php echo $username; ?></span>
                        </a>
                    </li>
                    <li>
                      <a href="/qizhi/logout">
                            <span class="glyphicon glyphicon-log-out"></span>
                        注销</a>
                    </li>
                   
              </ul>
            </nav>
          </div>
        </header>

       <div class="container-fluid bs-docs-container">
      <div class="row">
            <div class="col-md-2">
             
            </div>
        <div class="col-md-10" role="main">
        <div id="page-wrapper">
        <div class="col-md-12 graphs">
	   <div class="xs">

          <form class="form-inline search" role="form" method="post" action="/">
	<div class="form-group" style="width:250px;" >
		<label class="" for="ip">IP地址：</label>
		<input type="text" class="form-control " style="width: 167px;" id="ip" name="ip"
			   placeholder="<?php if(isset($form_ip) && $form_ip !='') {}else{ echo '请输入ip';}?>" value="<?php if(isset($form_ip) && $form_ip !='') { echo $form_ip;}else{ echo '';}?>">
	</div>	

	<button type="submit" class="btn btn-primary" style="margin-left: 30px;">查询</button> &nbsp;&nbsp;&nbsp;&nbsp;
  <input type="reset" class="btn btn-info reset_fuck" value='重置'>&nbsp;&nbsp;&nbsp;&nbsp;
  <button type="button" class="btn btn-info mohu">模糊</button> &nbsp;&nbsp;&nbsp;&nbsp;  
  
        </form>

  	 <div class='myproject_select' style='width:200px;'>
     </div>
     
  	<div class="bs-example4" data-example-id="contextual-table">
      
    <table class="table table-bordered" style="table-layout:fixed;">
      <thead>
        <tr>
          
          
          <!--<<th>机型</th>-->
          
          <th width="12%">公网IP</th>
          <th width="12%">内网IP</th>
		  <!--<th width="4%">状态</th>-->
          <th width="11%">操作</th>
         
          
        </tr>
      </thead>
      <tbody>

        <?php
            
            //机器列表循环开始
            foreach ($rs as $v) {                          
               
                //自定义显示公网ip字段
                if($v['ip']=='-'){
                    $public_ip = $v['private_ip'];
                }else{
                    $public_ip = $v['ip'];
                }
                              
				
        ?>
        <tr>        
          
          <td><?php echo $v['ip'];?></td>
          <td><?php echo $v['private_ip']; ?></td>		     
          <td>
            
          <?php              

              echo "<button type='button'  server='{$server_id}' service='{$service_id}' targetip='{$v['private_ip']}|{$public_ip}' app='xshell' title='ssh' class='btn btn-info fuckclick'>登录</button>";

          ?>          
            			
          </td>
         </tr>

        <?php         
            }  //机器列表循环结束     
        ?>

      </tbody>
    </table>
 



 </div>
 

  </div>
  
   </div>
      </div>
      <!-- /#page-wrapper -->
</div>
  </div>
</div> 
</div>

<script src="/static/bootstrap/js/metisMenu.min.js"></script>
<script src="/static/bootstrap/js/custom.js"></script>
<div id="service_start" title="启动服务" class="centerhide">
  <p id="waiting_span">如果你能看清这行字,那就牛逼了....</p>
  <p id="system_error" class="warning">
    系统错误  </p>
</div>
<input type='hidden' class='hid_user' value='<?php echo $username; ?>'>
<script type="text/javascript" src="/static/js/json2.js"></script>
<script type="text/javascript" src="/static/js/shterm-run.js"></script>
<script type="text/javascript" src="/static/bootstrap/js/server_grid_air.js?ts=201803200029"></script>

<script type="text/javascript">









//清理表单
$(".reset_fuck").click(function(){

    $("#ip").attr('value','');

    if($('#idc option:first').val() != ''){
      $('#idc option:first').remove();
    }
    

});













$(".mohu").click(function(){

    var timestamp = Date.parse(new Date());
    $.get("/qizhi/setmohu", {  time :timestamp},
        function(data){

        }
    );

});



</script>
<script type="text/javascript">

function _init(){
}

function _close(){
  //java加载完毕时为指定html元素绑定监听事件
  sg.bind_event();
}
sg.createPluginDom();
$('#center').height($( document ).height()-170);
</script>
<script type="text/javascript">
//提示安装jre
function show_jre_tip(){
  $("#noShtermLoader").dialog({
    autoOpen:true,
    resizable:false,
    modal:true,
    width:300,
    open:function(){
      $(this).find(".jre").show();
      $(this).find(".activex").hide();
    } 
  });
}

if($.os.name === 'win'){
    sg.init();
}else{
    if (PluginDetect.isMinVersion("java", "1.6") > 0){
        sg.init();
    }else{
        //IE6不能弹窗，只能用普通alert方式提示安装jre
        if($.browser.msie && $.browser.version<7){
            alert('警告：需要安装Java运行环境1.6或以上版本（点此下载）并打开浏览器Java支持。');
            location.href="../tools.php";
        }else{
            show_jre_tip();
        }
    }
}
</script> 

</body>
</html>
